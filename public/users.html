<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ユーザー一覧</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="sidebar">
      <a href="/">← ホーム</a><br />
      <a href="/edit.html">新規ページ作成</a><br />
    </div>

    <div id="content">
      <h1>ユーザー一覧</h1>
      <div id="userGrid" class="tile-grid"></div>
    </div>

    <script>
      async function loadUsers() {
        const users = await fetch("/api/users").then((r) => r.json());
        const box = document.getElementById("userGrid");

        users.forEach((u) => {
          const div = document.createElement("div");
          div.className = "tile";
          const maskIP = u.name ? u.name.replace(/\.\d+$/, ".*") : "???";
          div.innerHTML = `<img class="tile-icon" src="${
            u.icon || ""
          }"><div class="tile-title">${maskIP}</div>`;
          box.appendChild(div);
        });
      }
      loadUsers();
    </script>
  </body>
</html>
